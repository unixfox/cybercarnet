<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés | CyberCarnet</title><meta name=keywords content="email,spam,ia,vie privée,ollama,rspamd,mailcow"><meta name=description content="Utilisez les LLM pour bloquer les spams sur votre serveur de messagerie à l'aide de Rspamd et Ollama."><meta name=author content="Emilien"><link rel=canonical href=https://cybercarnet.eu/fr/posts/email-spam-llm/><link crossorigin=anonymous href=/assets/css/stylesheet.e9192539b62076251574bf8e248e392a5b47e17b6c8b1eb7e4fe5e827f0b4fb9.css integrity="sha256-6RklObYgdiUVdL+OJI45KltH4Xtsix635P5egn8LT7k=" rel="preload stylesheet" as=style><link rel=icon href=https://cybercarnet.eu/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cybercarnet.eu/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cybercarnet.eu/favicon-32x32.png><link rel=apple-touch-icon href=https://cybercarnet.eu/apple-touch-icon.png><link rel=mask-icon href=https://cybercarnet.eu/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://cybercarnet.eu/posts/email-spam-llm/><link rel=alternate hreflang=fr href=https://cybercarnet.eu/fr/posts/email-spam-llm/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://cybercarnet.eu/fr/posts/email-spam-llm/"><meta property="og:site_name" content="CyberCarnet"><meta property="og:title" content="Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés"><meta property="og:description" content="Utilisez les LLM pour bloquer les spams sur votre serveur de messagerie à l'aide de Rspamd et Ollama."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-11T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés"><meta name=twitter:description content="Utilisez les LLM pour bloquer les spams sur votre serveur de messagerie à l'aide de Rspamd et Ollama."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cybercarnet.eu/fr/posts/"},{"@type":"ListItem","position":2,"name":"Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés","item":"https://cybercarnet.eu/fr/posts/email-spam-llm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés","name":"Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés","description":"Utilisez les LLM pour bloquer les spams sur votre serveur de messagerie à l'aide de Rspamd et Ollama.","keywords":["email","spam","ia","vie privée","ollama","rspamd","mailcow"],"articleBody":"Les spams sont devenus de plus en plus présents ces dernières années. Votre adresse email est désormais dans toutes les listes des spammeurs. Les spammeurs sont plus forts que les autres pour configurer correctement le SPF, DKIM et DMARC.1 Les protections classiques ne fonctionnent plus.\nVoici comment vous protéger contre les spams en analysant vos emails avec des LLMs auto-hébergés.\nRspamd sera utilisé avec Mailcow, mais cela fonctionne aussi avec un Rspamd tout seul/isolé. Ollama sera utilisé pour sa simplicité, mais cela fonctionne aussi avec d’autres API compatible OpenAI API. Pourquoi j’ai commencé à analyser mes emails avec des LLMs ? Cela fait 10 ans que j’héberge mon propre serveur mail. La configuration par défaut de Rspamd sur Mailcow a toujours fonctionné avec un taux de blocage des spams à 95%.\nMais il y a un an, j’ai remarqué que le blocage des spams était beaucoup moins effectif qu’auparavant. À tel point que j’étais de nouveau embêté par les spams, ce qui m’était uniquement arrivé lorsque j’utilisais des services publics comme Outlook ou Gmail.\nJusqu’à ce que je découvre le plugin GPT de Rspamd.\nEst-ce que mes données sont envoyées vers le cloud propriétaire ? Le plugin GPT me recommande d’utiliser le modèle d’OpenAI GPT o4-mini. Le plugin GPT fonctionne par défaut très bien avec les modèles populaires comme o4-mini ou Gemini 2.5 flash. Mais je n’ai pas envie d’envoyer tous mes emails dans le cloud propriétaire, encore moins à OpenAI ou Google. Sans savoir ce qu’ils feront de mes données personnelles.\nDu coup, j’ai expérimenté avec Ollama et ses nombreux LLMs open source. J’ai testé une série de spam et de courriers légitimes sur les modèles Gemma, Qwen, LLama, Mistral. Et même des LLMs distillés de LLMs populaires, comme Gemma 3 distillé avec le modèle OpenAI o4 mini.\nJe recherchais un petit LLM (en dessous de 10GB) qui peut tourner confortablement sur un GPU de moyenne gamme. Principalement parce que Rspamd exige que tous les plugins répondent en moins de 30 secondes, ce qui fait que les petits LLM produisent des réponses plus rapidement.\nCe qui fonctionnait bien était une combinaison de Google Gemma 3 12B, un prompt détaillé (pas le prompt par défaut de Rspamd) et de lui donner du contexte supplémentaire de recherches Web.\nJ’ai appris que les petits LLms ne fonctionnent bien qu’avec des tâches compliquées lors que le prompt est très détaillé à propos de la tâche. Du coup, j’ai demandé à OpenAI o4 de m’écrire un prompt et voici un prompt qu’il m’a donné dont il fonctionne très bien pour toutes les situations :\nCliquez pour lire le prompt. You are an expert email evaluator analyzing messages for spam or malicious intent. Use the full content of the email, sender information, and web presence to assess its legitimacy. Assumptions:\nDKIM authentication is valid; the sender address has not been spoofed. You will be provided with the sender domain’s web presence for additional context. Evaluation Criteria:\nDomain legitimacy and sender identity (based on matching domain and content). Language, tone, and structure: assess if it resembles common phishing or scam tactics. External context: if the domain has a strong, legitimate online presence, this is a positive signal. Check if the domain activities is related to the domain used to send the email. Output exactly 3 lines:\nNumeric spam/malicious probability from 0.00 to 1.00. One-sentence justification based on the strongest risk signal (or clearest sign of legitimacy). (Only if score \u003e 0.5, the concern category) phishing, scam, malware, or marketing. Leave blank otherwise. Et pour les recherches Web. J’ai eu cette idée en me disant :\nQue ferais-je si je ne connaissais pas grand-chose à propos d’une entreprise qui m’envoie un e-mail et que je voulais vérifier si elle est digne de confiance ?\nC’est particulièrement important, car les petits LLMs ont beaucoup moins de connaissances à propos du Web qu’un LLM plus large. D’après mes expérimentations, les LLMs n’arrivaient pas à correctement identifier l’agence immobilière à laquelle je loue mon appartement. Ils pensaient que c’était une arnaque. Parce qu’ils ne la connaissent pas, cette agence est peu connue pour faire part de leurs données d’entrainement.\nPour faire des recherches Web, vous pouvez utiliser n’importe quelle API de recherche. Des API propriétaires comme celle de Google, Brave ou Bing. Ou alors une API qui scrape les résultats de moteurs de recherche publics comme celle de SearXNG Search API.\nJ’ai plutôt utilisé l’API non officielle de Mullvad Leta. Ce service a comme source les résultats de Google ou Brave. Et Mullvad a fait ses preuves en matière de confidentialité des utilisateurs, et je voulais une API fiable. Mon serveur mail et mon Nextcloud sont les deux services qui doivent toujours bien fonctionner.\nLe plugin GPT de Rspamd n’offre pas encore la possibilité d’ajouter du contexte supplémentaire d’un service externe, donc j’ai créé un proxy qui intercepte les requêtes entre le plugin et l’API de Ollama. Ce proxy ajoute au contexte les résultats de recherche Web.\nEn résumé, le fonctionnement par étape Si Rspamd a des doutes si l’email est du spam ou non. Il envoie une requête à mon proxy. Mon proxy fait une requête sur le service Mullvad Leta avec des informations comme qui a envoyé l’email et les liens contenus dans l’email. Le proxy envoie une requête à l’API de Ollama. Ollama répond, le proxy redirige la réponse à Rspamd. En fonction du score donné par le LLM, Rspamd classifie si l’email est du spam ou non. Guide d’installation Pré-requis Mailcow d’installé. Ollama installé localement ou sur un serveur distant. Ollama a besoin d’utiliser un GPU parce que sur CPU cela prend trop de temps à traiter. Instructions A) Configurer Ollama Ces LLMs suivants fonctionnent très bien : gemma3:12b, llama3.3:70b and qwen3:32b. J’ai choisi gemma3:12b parce qu’il a la plus petite taille.\nRécupèrer le LLM: ollama pull gemma3:12b.\nB) Configurer le plugin GPT dans Rspamd dans Mailcow Aller dans le dossier d’installation de Mailcow: /opt/mailcow-dockerized. Ouvrir le fichier data/conf/rspamd/local.d/gpt.conf. Replacer le fichier avec ce fichier de config: enabled = true; # Enable the plugin type = \"openai\"; # Supported types: openai, ollama api_key = \"dummy\" model = \"gemma3:12b\" temperature = 0.0; autolearn = false; max_tokens = 1000; # Maximum tokens to generate timeout = 120s; # Timeout for requests prompt = \"You are an expert email evaluator analyzing messages for spam or malicious intent. Use the full content of the email, sender information, and web presence to assess its legitimacy. \\n Assumptions: \\n - DKIM authentication is valid; the sender address has not been spoofed. \\n - You will be provided with the sender domain's web presence for additional context. \\n Evaluation Criteria: \\n 1. Domain legitimacy and sender identity (based on matching domain and content). \\n 2. Language, tone, and structure: assess if it resembles common phishing or scam tactics. \\n 3. External context: if the domain has a strong, legitimate online presence, this is a positive signal. \\n Output exactly 3 lines: \\n 1. Numeric spam/malicious probability from 0.00 to 1.00, less than 0.25 is ham and more than 0.75 is spam (if you find a concern category it's a spam). \\n 2. One-sentence justification based on the strongest risk signal (or clearest sign of legitimacy). \\n 3. (Only if score \u003e 0.5, the concern category) phishing, scam, malware, or marketing. Leave blank otherwise.\" url = \"http://rspamdgpt:8080/api/v1/chat/completions\"; # URL for the API allow_passthrough = false; # Check messages with passthrough result allow_ham = false; # Check messages that are apparent ham (no action and negative score) reason_header = \"X-GPT-Reason\"; # Add header with reason (null to disable) symbols_to_except = { MAILCOW_BLACK = 1998, BAYES_SPAM = 0.9, MAILCOW_FUZZY_DENIED = 1, FUZZY_DENIED = 1, WHITELIST_SPF = -1, WHITELIST_DKIM = -1, WHITELIST_DMARC = -1, REPLY = -1, } json = false; # Use JSON format for response Redémarrer Rspamd avec docker compose restart rspamd-mailcow C) Configurer le proxy Le code source du programme se trouve dans https://github.com/unixfox/mailcow-rspamd-ollama.\nFaire un git clone du proxy dans /opt: git clone https://github.com/unixfox/mailcow-rspamd-ollama.git /opt/mailcow-rspamd-ollama Aller dans le dossier /opt/mailcow-rspamd-ollama. Configurer l’API de Ollama si vous utilisez une instance distante en changeant la variable d’environnement OLLAMA_API. Exécuter le programme avec docker compose up -d. Configuration terminée Vous pouvez tester si cela fonctionne. Mon site préféré pour tester si le setup fonctionne est de s’inscrire sur ChatGPT : https://chatgpt.com. Les emails de ChatGPT ont toujours un score de 2 dans Rspamd, ce qui déclenche la vérification par le plugin GPT.\nUtiliser la page d’administration de Rspamd pour vérifier que l’email a été analysé par le LLM : https://yourmailcowdomain/rspamd/.\nQue faire si je ne dispose pas d’un GPU suffisamment puissant pour exécuter un LLM local ? Ce proxy fonctionne avec n’importe quel API compatible OpenAI API.\nSi vous souhaitez faire attention à votre vie privée, vous pouvez utiliser un fournisseur Européen comme Nebius AI Studio (Pays-Bas) ou Mistral AI API (France).\nOu bien utiliser un GPU dédié dans le cloud, où vous paierez à l’usage par secondes/minutes d’utilisation. Runpod, Fly.io, Vast.ai ou d’autres fournisseurs.\nRetour après 6 mois d’utilisation Le setup fonctionne très bien. J’ai eu très peu de faux positifs. Environ 5 sur 2000 emails reçus et analysés par le programme.\nPour les quelques faux positifs, ils sont accessibles dans le dossier spam, donc je peux toujours les lire. Le système de score de Rspam est vraiment bon. Par défaut, si un email a un score entre 6 et 15, il est mis dans le dossier spam. Si le score est plus haut que 15, l’email est rejetté.\nDans la plupart des cas, les spams ont un score supérieur à 15 parce que le plugin GPT peut donner jusqu’à 8 points pour la classification de spam et d’hameçonnage en même temps.\nSolutions à des problèmes L’API Ollama est trop lente pour répondre à Rspamd. Augmentez le délai d’expiration de tous les plugins à 60 secondes en modifiant ce fichier : /opt/mailcow-dockerized/data/conf/rspamd/override.d/worker-normal.custom.inc.\nChanger à task_timeout = 60s;.\nhttps://toad.social/@grumpybozo/114213600922816869 (Web Archive) (Commentaires Hackernews) ↩︎\n","wordCount":"1657","inLanguage":"fr","datePublished":"2025-10-11T00:00:00Z","dateModified":"2025-10-11T00:00:00Z","author":{"@type":"Person","name":"Emilien"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cybercarnet.eu/fr/posts/email-spam-llm/"},"publisher":{"@type":"Organization","name":"CyberCarnet","logo":{"@type":"ImageObject","url":"https://cybercarnet.eu/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://cybercarnet.eu/fr/ accesskey=h title="CyberCarnet (Alt + H)">CyberCarnet</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://cybercarnet.eu/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://cybercarnet.eu/fr/archives title=Archive><span>Archive</span></a></li><li><a href=https://cybercarnet.eu/fr/search/ title=Recherche><span>Recherche</span></a></li><li><a href=https://cybercarnet.eu/fr/frtags/ title=Tags><span>Tags</span></a></li><li><a href=https://cybercarnet.eu/fr/index.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cybercarnet.eu/fr/>Accueil</a>&nbsp;»&nbsp;<a href=https://cybercarnet.eu/fr/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés</h1><div class=post-description>Utilisez les LLM pour bloquer les spams sur votre serveur de messagerie à l'aide de Rspamd et Ollama.</div><div class=post-meta><span title='2025-10-11 00:00:00 +0000 UTC'>octobre 11, 2025</span>&nbsp;·&nbsp;Emilien&nbsp;|&nbsp;Traductions:<ul class=i18n_list><li><a href=https://cybercarnet.eu/posts/email-spam-llm/>English</a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table des matières</span></summary><div class=inner><ul><li><a href=#pourquoi-jai-commenc%c3%a9-%c3%a0-analyser-mes-emails-avec-des-llms- aria-label="Pourquoi j&rsquo;ai commencé à analyser mes emails avec des LLMs ?">Pourquoi j&rsquo;ai commencé à analyser mes emails avec des LLMs ?</a></li><li><a href=#est-ce-que-mes-donn%c3%a9es-sont-envoy%c3%a9es-vers-le-cloud-propri%c3%a9taire--le-plugin-gpt-me-recommande-dutiliser-le-mod%c3%a8le-dopenai-gpt-o4-mini aria-label="Est-ce que mes données sont envoyées vers le cloud propriétaire ? Le plugin GPT me recommande d&rsquo;utiliser le modèle d&rsquo;OpenAI GPT o4-mini.">Est-ce que mes données sont envoyées vers le cloud propriétaire ? Le plugin GPT me recommande d&rsquo;utiliser le modèle d&rsquo;OpenAI GPT o4-mini.</a></li><li><a href=#en-r%c3%a9sum%c3%a9-le-fonctionnement-par-%c3%a9tape aria-label="En résumé, le fonctionnement par étape">En résumé, le fonctionnement par étape</a></li><li><a href=#guide-dinstallation aria-label="Guide d&rsquo;installation">Guide d&rsquo;installation</a><ul><li><a href=#pr%c3%a9-requis aria-label=Pré-requis>Pré-requis</a></li><li><a href=#instructions aria-label=Instructions>Instructions</a><ul><li><a href=#a-configurer-ollama aria-label="A) Configurer Ollama">A) Configurer Ollama</a></li><li><a href=#b-configurer-le-plugin-gpt-dans-rspamd-dans-mailcow aria-label="B) Configurer le plugin GPT dans Rspamd dans Mailcow">B) Configurer le plugin GPT dans Rspamd dans Mailcow</a></li><li><a href=#c-configurer-le-proxy aria-label="C) Configurer le proxy">C) Configurer le proxy</a></li><li><a href=#configuration-termin%c3%a9e aria-label="Configuration terminée">Configuration terminée</a></li></ul></li><li><a href=#que-faire-si-je-ne-dispose-pas-dun-gpu-suffisamment-puissant-pour-ex%c3%a9cuter-un-llm-local- aria-label="Que faire si je ne dispose pas d&rsquo;un GPU suffisamment puissant pour exécuter un LLM local ?">Que faire si je ne dispose pas d&rsquo;un GPU suffisamment puissant pour exécuter un LLM local ?</a></li><li><a href=#retour-apr%c3%a8s-6-mois-dutilisation aria-label="Retour après 6 mois d&rsquo;utilisation">Retour après 6 mois d&rsquo;utilisation</a></li><li><a href=#solutions-%c3%a0-des-probl%c3%a8mes aria-label="Solutions à des problèmes">Solutions à des problèmes</a><ul><li><a href=#lapi-ollama-est-trop-lente-pour-r%c3%a9pondre-%c3%a0-rspamd aria-label="L&rsquo;API Ollama est trop lente pour répondre à Rspamd.">L&rsquo;API Ollama est trop lente pour répondre à Rspamd.</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><p>Les spams sont devenus de plus en plus présents ces dernières années. Votre adresse email est désormais dans toutes les listes des spammeurs. Les spammeurs sont plus forts que les autres pour configurer correctement le SPF, DKIM et DMARC.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> Les protections classiques ne fonctionnent plus.</p><p>Voici comment vous protéger contre les spams en analysant vos emails avec des LLMs auto-hébergés.</p><hr><blockquote><ul><li><a href=https://rspamd.com>Rspamd</a> sera utilisé avec <a href=https://docs.mailcow.email/>Mailcow</a>, mais cela fonctionne aussi avec un Rspamd tout seul/isolé.</li><li><a href=https://ollama.com>Ollama</a> sera utilisé pour sa simplicité, mais cela fonctionne aussi avec d&rsquo;autres API compatible OpenAI API.</li></ul></blockquote><hr><h2 id=pourquoi-jai-commencé-à-analyser-mes-emails-avec-des-llms->Pourquoi j&rsquo;ai commencé à analyser mes emails avec des LLMs ?<a hidden class=anchor aria-hidden=true href=#pourquoi-jai-commencé-à-analyser-mes-emails-avec-des-llms->#</a></h2><p>Cela fait 10 ans que j&rsquo;héberge mon propre serveur mail. La configuration par défaut de Rspamd sur Mailcow a toujours fonctionné avec un taux de blocage des spams à 95%.</p><p>Mais il y a un an, j&rsquo;ai remarqué que le blocage des spams était beaucoup moins effectif qu&rsquo;auparavant. À tel point que j&rsquo;étais de nouveau embêté par les spams, ce qui m&rsquo;était uniquement arrivé lorsque j&rsquo;utilisais des services publics comme Outlook ou Gmail.</p><p>Jusqu&rsquo;à ce que je découvre le <a href=https://docs.rspamd.com/modules/gpt/>plugin GPT</a> de Rspamd.</p><h2 id=est-ce-que-mes-données-sont-envoyées-vers-le-cloud-propriétaire--le-plugin-gpt-me-recommande-dutiliser-le-modèle-dopenai-gpt-o4-mini>Est-ce que mes données sont envoyées vers le cloud propriétaire ? Le plugin GPT me recommande d&rsquo;utiliser le modèle d&rsquo;OpenAI GPT o4-mini.<a hidden class=anchor aria-hidden=true href=#est-ce-que-mes-données-sont-envoyées-vers-le-cloud-propriétaire--le-plugin-gpt-me-recommande-dutiliser-le-modèle-dopenai-gpt-o4-mini>#</a></h2><p>Le plugin GPT fonctionne par défaut très bien avec les modèles populaires comme o4-mini ou Gemini 2.5 flash. Mais je n&rsquo;ai pas envie d&rsquo;envoyer tous mes emails dans le cloud propriétaire, encore moins à OpenAI ou Google. Sans savoir ce qu&rsquo;ils feront de mes données personnelles.</p><p>Du coup, j&rsquo;ai expérimenté avec Ollama et ses nombreux LLMs open source. J&rsquo;ai testé une série de spam et de courriers légitimes sur les modèles Gemma, Qwen, LLama, Mistral. Et même des LLMs distillés de LLMs populaires, comme Gemma 3 distillé avec le modèle OpenAI o4 mini.</p><p>Je recherchais un petit LLM (en dessous de 10GB) qui peut tourner confortablement sur un GPU de moyenne gamme. Principalement parce que Rspamd exige que tous les plugins répondent en moins de 30 secondes, ce qui fait que les petits LLM produisent des réponses plus rapidement.</p><p>Ce qui fonctionnait bien était une combinaison de Google Gemma 3 12B, un prompt détaillé (pas le prompt par défaut de Rspamd) et de lui donner du contexte supplémentaire de recherches Web.</p><p>J&rsquo;ai appris que les petits LLms ne fonctionnent bien qu&rsquo;avec des tâches compliquées lors que le prompt est très détaillé à propos de la tâche. Du coup, j&rsquo;ai demandé à OpenAI o4 de m&rsquo;écrire un prompt et voici un prompt qu&rsquo;il m&rsquo;a donné dont il fonctionne très bien pour toutes les situations :</p><blockquote><p><details><summary markdown=span>Cliquez pour lire le prompt.</summary><p>You are an expert email evaluator analyzing messages for spam or malicious intent. Use the full content of the email, sender information, and web presence to assess its legitimacy.
Assumptions:</p><ul><li>DKIM authentication is valid; the sender address has not been spoofed.</li><li>You will be provided with the sender domain&rsquo;s web presence for additional context.</li></ul><p>Evaluation Criteria:</p><ol><li>Domain legitimacy and sender identity (based on matching domain and content).</li><li>Language, tone, and structure: assess if it resembles common phishing or scam tactics.</li><li>External context: if the domain has a strong, legitimate online presence, this is a positive signal.</li><li>Check if the domain activities is related to the domain used to send the email.</li></ol><p>Output exactly 3 lines:</p><ol><li>Numeric spam/malicious probability from 0.00 to 1.00.</li><li>One-sentence justification based on the strongest risk signal (or clearest sign of legitimacy).</li><li>(Only if score > 0.5, the concern category) phishing, scam, malware, or marketing. Leave blank otherwise.</li></ol></details></p></blockquote><p>Et pour les recherches Web. J&rsquo;ai eu cette idée en me disant :</p><blockquote><p>Que ferais-je si je ne connaissais pas grand-chose à propos d&rsquo;une entreprise qui m&rsquo;envoie un e-mail et que je voulais vérifier si elle est digne de confiance ?</p></blockquote><p>C&rsquo;est particulièrement important, car les petits LLMs ont beaucoup moins de connaissances à propos du Web qu&rsquo;un LLM plus large. D&rsquo;après mes expérimentations, les LLMs n&rsquo;arrivaient pas à correctement identifier l&rsquo;agence immobilière à laquelle je loue mon appartement. Ils pensaient que c&rsquo;était une arnaque. Parce qu&rsquo;ils ne la connaissent pas, cette agence est peu connue pour faire part de leurs données d&rsquo;entrainement.</p><p>Pour faire des recherches Web, vous pouvez utiliser n&rsquo;importe quelle API de recherche. Des API propriétaires comme celle de Google, Brave ou Bing. Ou alors une API qui scrape les résultats de moteurs de recherche publics comme celle de <a href=https://docs.searxng.org/dev/search_api.html>SearXNG Search API</a>.</p><p>J&rsquo;ai plutôt utilisé l&rsquo;API non officielle de <a href=https://leta.mullvad.net>Mullvad Leta</a>. Ce service a comme source les résultats de Google ou Brave. Et Mullvad a fait ses preuves en matière de confidentialité des utilisateurs, et je voulais une API fiable. Mon serveur mail et mon Nextcloud sont les deux services qui doivent toujours bien fonctionner.</p><p>Le plugin GPT de Rspamd n&rsquo;offre pas encore la possibilité d&rsquo;ajouter du contexte supplémentaire d&rsquo;un service externe, donc j&rsquo;ai créé un proxy qui intercepte les requêtes entre le plugin et l&rsquo;API de Ollama. Ce proxy ajoute au contexte les résultats de recherche Web.</p><h2 id=en-résumé-le-fonctionnement-par-étape>En résumé, le fonctionnement par étape<a hidden class=anchor aria-hidden=true href=#en-résumé-le-fonctionnement-par-étape>#</a></h2><ol><li>Si Rspamd a des doutes si l&rsquo;email est du spam ou non. Il envoie une requête à mon proxy.</li><li>Mon proxy fait une requête sur le service Mullvad Leta avec des informations comme qui a envoyé l&rsquo;email et les liens contenus dans l&rsquo;email.</li><li>Le proxy envoie une requête à l&rsquo;API de Ollama.</li><li>Ollama répond, le proxy redirige la réponse à Rspamd.</li><li>En fonction du score donné par le LLM, Rspamd classifie si l&rsquo;email est du spam ou non.</li></ol><h2 id=guide-dinstallation>Guide d&rsquo;installation<a hidden class=anchor aria-hidden=true href=#guide-dinstallation>#</a></h2><h3 id=pré-requis>Pré-requis<a hidden class=anchor aria-hidden=true href=#pré-requis>#</a></h3><ul><li><a href=https://mailcow.email>Mailcow</a> d&rsquo;installé.</li><li><a href=https://ollama.com>Ollama</a> installé localement ou sur un serveur distant.</li><li>Ollama a besoin d&rsquo;utiliser un GPU parce que sur CPU cela prend trop de temps à traiter.</li></ul><h3 id=instructions>Instructions<a hidden class=anchor aria-hidden=true href=#instructions>#</a></h3><h4 id=a-configurer-ollama>A) Configurer Ollama<a hidden class=anchor aria-hidden=true href=#a-configurer-ollama>#</a></h4><p>Ces LLMs suivants fonctionnent très bien : <code>gemma3:12b</code>, <code>llama3.3:70b</code> and <code>qwen3:32b</code>. J&rsquo;ai choisi <code>gemma3:12b</code> parce qu&rsquo;il a la plus petite taille.</p><p>Récupèrer le LLM: <code>ollama pull gemma3:12b</code>.</p><h4 id=b-configurer-le-plugin-gpt-dans-rspamd-dans-mailcow>B) Configurer le plugin GPT dans Rspamd dans Mailcow<a hidden class=anchor aria-hidden=true href=#b-configurer-le-plugin-gpt-dans-rspamd-dans-mailcow>#</a></h4><ol><li>Aller dans le dossier d&rsquo;installation de Mailcow: <code>/opt/mailcow-dockerized</code>.</li><li>Ouvrir le fichier <code>data/conf/rspamd/local.d/gpt.conf</code>.</li><li>Replacer le fichier avec ce fichier de config:</li></ol><pre tabindex=0><code>enabled = true; # Enable the plugin
type = &#34;openai&#34;; # Supported types: openai, ollama
api_key = &#34;dummy&#34;
model = &#34;gemma3:12b&#34;
temperature = 0.0;
autolearn = false;
max_tokens = 1000; # Maximum tokens to generate
timeout = 120s; # Timeout for requests
prompt = &#34;You are an expert email evaluator analyzing messages for spam or malicious intent. Use the full content of the email, sender information, and web presence to assess its legitimacy. \n Assumptions: \n - DKIM authentication is valid; the sender address has not been spoofed. \n - You will be provided with the sender domain&#39;s web presence for additional context. \n Evaluation Criteria: \n 1. Domain legitimacy and sender identity (based on matching domain and content). \n 2. Language, tone, and structure: assess if it resembles common phishing or scam tactics. \n 3. External context: if the domain has a strong, legitimate online presence, this is a positive signal. \n Output exactly 3 lines: \n 1. Numeric spam/malicious probability from 0.00 to 1.00, less than 0.25 is ham and more than 0.75 is spam (if you find a concern category it&#39;s a spam). \n 2. One-sentence justification based on the strongest risk signal (or clearest sign of legitimacy). \n 3. (Only if score &gt; 0.5, the concern category) phishing, scam, malware, or marketing. Leave blank otherwise.&#34;
url = &#34;http://rspamdgpt:8080/api/v1/chat/completions&#34;; # URL for the API
allow_passthrough = false; # Check messages with passthrough result
allow_ham = false; # Check messages that are apparent ham (no action and negative score)
reason_header = &#34;X-GPT-Reason&#34;; # Add header with reason (null to disable)
symbols_to_except = { MAILCOW_BLACK = 1998, BAYES_SPAM = 0.9, MAILCOW_FUZZY_DENIED = 1, FUZZY_DENIED = 1, WHITELIST_SPF = -1, WHITELIST_DKIM = -1, WHITELIST_DMARC = -1, REPLY = -1, }
json = false; # Use JSON format for response
</code></pre><ol start=4><li>Redémarrer Rspamd avec <code>docker compose restart rspamd-mailcow</code></li></ol><h4 id=c-configurer-le-proxy>C) Configurer le proxy<a hidden class=anchor aria-hidden=true href=#c-configurer-le-proxy>#</a></h4><p>Le code source du programme se trouve dans <a href=https://github.com/unixfox/mailcow-rspamd-ollama>https://github.com/unixfox/mailcow-rspamd-ollama</a>.</p><ol><li>Faire un git clone du proxy dans /opt:<pre tabindex=0><code>git clone https://github.com/unixfox/mailcow-rspamd-ollama.git /opt/mailcow-rspamd-ollama
</code></pre></li><li>Aller dans le dossier <code>/opt/mailcow-rspamd-ollama</code>.</li><li>Configurer l&rsquo;API de Ollama si vous utilisez une instance distante en changeant la variable d&rsquo;environnement <code>OLLAMA_API</code>.</li><li>Exécuter le programme avec <code>docker compose up -d</code>.</li></ol><h4 id=configuration-terminée>Configuration terminée<a hidden class=anchor aria-hidden=true href=#configuration-terminée>#</a></h4><p>Vous pouvez tester si cela fonctionne. Mon site préféré pour tester si le setup fonctionne est de s&rsquo;inscrire sur ChatGPT : <a href=https://chatgpt.com>https://chatgpt.com</a>. Les emails de ChatGPT ont toujours un score de 2 dans Rspamd, ce qui déclenche la vérification par le plugin GPT.</p><p>Utiliser la page d&rsquo;administration de Rspamd pour vérifier que l&rsquo;email a été analysé par le LLM : https://yourmailcowdomain/rspamd/.</p><p><img alt=regular loading=lazy src=/images/2025-07-19_19-49-rspamd-admin-gpt.png></p><h3 id=que-faire-si-je-ne-dispose-pas-dun-gpu-suffisamment-puissant-pour-exécuter-un-llm-local->Que faire si je ne dispose pas d&rsquo;un GPU suffisamment puissant pour exécuter un LLM local ?<a hidden class=anchor aria-hidden=true href=#que-faire-si-je-ne-dispose-pas-dun-gpu-suffisamment-puissant-pour-exécuter-un-llm-local->#</a></h3><p>Ce proxy fonctionne avec n&rsquo;importe quel API compatible OpenAI API.</p><p>Si vous souhaitez faire attention à votre vie privée, vous pouvez utiliser un fournisseur Européen comme <a href=https://studio.nebius.com>Nebius AI Studio</a> (Pays-Bas) ou <a href=https://mistral.ai>Mistral AI API</a> (France).</p><p>Ou bien utiliser un GPU dédié dans le cloud, où vous paierez à l&rsquo;usage par secondes/minutes d&rsquo;utilisation. <a href=https://www.runpod.io>Runpod</a>, <a href=https://fly.io/gpu>Fly.io</a>, <a href=https://vast.ai>Vast.ai</a> ou d&rsquo;autres fournisseurs.</p><h3 id=retour-après-6-mois-dutilisation>Retour après 6 mois d&rsquo;utilisation<a hidden class=anchor aria-hidden=true href=#retour-après-6-mois-dutilisation>#</a></h3><p>Le setup fonctionne très bien. J&rsquo;ai eu très peu de faux positifs. Environ 5 sur 2000 emails reçus et analysés par le programme.</p><p>Pour les quelques faux positifs, ils sont accessibles dans le dossier spam, donc je peux toujours les lire. Le système de score de Rspam est vraiment bon. Par défaut, si un email a un score entre 6 et 15, il est mis dans le dossier spam. Si le score est plus haut que 15, l&rsquo;email est rejetté.</p><p>Dans la plupart des cas, les spams ont un score supérieur à 15 parce que le plugin GPT peut donner jusqu&rsquo;à 8 points pour la classification de spam et d&rsquo;hameçonnage en même temps.</p><p><img alt=regular loading=lazy src=/images/2025-10-11_10-53.png></p><h3 id=solutions-à-des-problèmes>Solutions à des problèmes<a hidden class=anchor aria-hidden=true href=#solutions-à-des-problèmes>#</a></h3><h4 id=lapi-ollama-est-trop-lente-pour-répondre-à-rspamd>L&rsquo;API Ollama est trop lente pour répondre à Rspamd.<a hidden class=anchor aria-hidden=true href=#lapi-ollama-est-trop-lente-pour-répondre-à-rspamd>#</a></h4><p>Augmentez le délai d&rsquo;expiration de tous les plugins à 60 secondes en modifiant ce fichier : <code>/opt/mailcow-dockerized/data/conf/rspamd/override.d/worker-normal.custom.inc</code>.</p><p>Changer à <code>task_timeout = 60s;</code>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://toad.social/@grumpybozo/114213600922816869>https://toad.social/@grumpybozo/114213600922816869</a> (<a href=https://web.archive.org/web/20250409191904/https://toad.social/@grumpybozo/114213600922816869>Web Archive</a>) (<a href="https://news.ycombinator.com/item?id=43468995">Commentaires Hackernews</a>)&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on x" href="https://x.com/intent/tweet/?text=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s&amp;url=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f&amp;hashtags=email%2cspam%2cia%2cviepriv%c3%a9e%2collama%2crspamd%2cmailcow"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f&amp;title=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s&amp;summary=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s&amp;source=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f&title=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on whatsapp" href="https://api.whatsapp.com/send?text=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s%20-%20https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on telegram" href="https://telegram.me/share/url?text=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s&amp;url=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Protégez votre serveur mail des spams grâce aux LLMs auto-hébergés on ycombinator" href="https://news.ycombinator.com/submitlink?t=Prot%c3%a9gez%20votre%20serveur%20mail%20des%20spams%20gr%c3%a2ce%20aux%20LLMs%20auto-h%c3%a9berg%c3%a9s&u=https%3a%2f%2fcybercarnet.eu%2ffr%2fposts%2femail-spam-llm%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>MIT</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copier";function s(){t.innerHTML="Copié !",setTimeout(()=>{t.innerHTML="Copier"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>